#ifndef SERIALWRITER_HPP
#define SERIALWRITER_HPP

/*******************************/
/*     class: SerialWriter     */
/*******************************/

#include <boost/asio.hpp>
#include <ncurses.h>
#include <iostream>
#include <cstdlib>

class SerialWriter {

public:
  /* constructor */
  SerialWriter();

  /* destructor */
  ~SerialWriter();

  /* sends a command to the Arduino; set verbose to true for debugging 
     information (function expects ncurses mode) */
  void SerialWriter::SendCommand(char com, bool verbose);

private:
  /* the input-output service */
  boost::asio::io_service io_service;

  /* the port we are writing data to */
  boost::asio::serial_port port(io_service);  

  /* data_incoming, throttle/thrust, rudder/yaw, aileron/roll, elevator/pitch */
  boost::array<unsigned char,5> controls;

  /* helper function to sanitise data that will be written to Arduino 
     registers */
  void SerialWriter::ChangeValue(unsigned char& x, int c);
};

#endif /* SERIALWRITER_HPP */
